{% extends "site_base.html" %}

{% load i18n %}
{% load humanize i18n %}
{% load pagination_tags %}
{% load timezone_filters %}

{% block head_title %}{% trans "Início" %}{% endblock %}

{% block rtab_id %}id="home_tab"{% endblock %}

{% block extra_body %}
    {% if user.is_authenticated %}
    {% else %}
        {% url acct_signup as signup_url %}
        {% url acct_login as login_url %}
        <p>{% blocktrans %}Voc&ecirc; pode <a href="{{ signup_url }}">se cadastrar</a> ou <a href="{{ login_url }}">logar.</a>{% endblocktrans %}</p>        
    {% endif %}     
{% endblock %}

{% block center_panel %}
   
    <div class="tintz-title">Bem vindo, {{ other_user.get_profile.first_name }} {{ other_user.get_profile.last_name }}</div>
    
    <div class="updates">
    {% if notices %}
        {% autopaginate notices %}
        {# TODO: get timezone support working with regroup #}
        {% regroup notices by added.date as notices_by_date %}
            {% for date in notices_by_date %}
                <h2 class="notice_date">{{ date.grouper|date:"d/m/Y" }}</h2>
                {% for notice in date.list %}
                        <div class="notice">
                        {{ notice.message|safe }}
                        <div class="notice_time">{{ notice.added|localtime:account.timezone|time:"P" }}</div>
                        </div>
                {% endfor %}
            {% endfor %}        
        {% paginate %}        
    {% else %}
       <p>{% trans "N&atilde;o h&aacute; Atualizações." %}</p>
    {% endif %}
    </div>

{% endblock %}
